<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<script type="text/javascript">
	var abi=[
	{
		"constant": false,
		"inputs": [],
		"name": "doPayment",
		"outputs": [],
		"payable": true,
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getCreator",
		"outputs": [
			{
				"name": "",
				"type": "address"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [],
		"name": "kill",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": false,
		"inputs": [
			{
				"name": "num",
				"type": "uint256"
			}
		],
		"name": "setMyNumber",
		"outputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"constant": true,
		"inputs": [],
		"name": "getNumber",
		"outputs": [
			{
				"name": "",
				"type": "uint256"
			}
		],
		"payable": false,
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"payable": false,
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"payable": true,
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": false,
				"name": "message",
				"type": "string"
			},
			{
				"indexed": false,
				"name": "returnValue",
				"type": "string"
			}
		],
		"name": "PaymentEvent",
		"type": "event"
	}
];

var address = "0x0De4cdE77f96Debb53f96361d15452313aFA752B";

function paymentExample() {
	web3.eth.getAccounts(function(error, acc) {
		defaultAccount=acc[0];
		console.log(acc);
		console.log("defaultAccount="+defaultAccount);
		contract = web3.eth.contract(abi).at(address);
		console.log(contract);
		sum = document.getElementById("sum").value;
		sum = web3.toWei(sum, 'ether');
		contract.doPayment.sendTransaction(
			{		
			from: defaultAccount, 				
			value: sum 
			}, 
			function(error, data) {
				 if(error!=null) console.log(error);
                       console.log("Data="+data);
                });
	});
}
</script>
</head>
<body>
    <h1>ETH call payment function</h1>
    <p>Payment sum (ETH):</p>
    <input type="text" size="50" id="sum" />
    <button type="button" onClick="paymentExample();">pay</button>
</body>
</html>
